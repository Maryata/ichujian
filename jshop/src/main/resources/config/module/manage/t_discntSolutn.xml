<?xml version="1.0" encoding="GBK"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><!-- create by autoCode,v1.0.0 --><mapper namespace="manage.discntSolutn">	<!-- 分页查询折扣方案 -->	<select id="manage.discntSolutn.selectPageList" 		parameterType="net.jeeshop.services.manage.discntSolutn.bean.DiscntSolutn" 		resultType="net.jeeshop.services.manage.discntSolutn.bean.DiscntSolutn">	 	select * from t_discntsulotn where 1=1	 	<if test="id != null and id != ''">	 		and id = #{id}	 	</if>	 	<if test="name != null and name != ''">	 		and name like CONCAT('%',#{name},'%' )	 	</if>	 	<if test="updateTime != null and updateTime != ''">	 		and updateTime = #{updateTime}	 	</if>	 	<if test="updatePerson != null and updatePerson != ''">	 		and updatePerson like CONCAT('%',#{updatePerson},'%' )	 	</if>	 	<if test="status != null and status != ''">	 		and status = #{status}	 	</if>	 	<if test="comment != null and comment != ''">	 		and comment = #{comment}	 	</if>	 	order by updateTime desc  		limit #{offset},#{pageSize}	</select> 	 	<!-- 查询总页数 -->	<select id="manage.discntSolutn.selectPageCount" 		parameterType="net.jeeshop.services.manage.discntSolutn.bean.DiscntSolutn"  resultType="java.lang.Integer">	 	select count(*) from t_discntsulotn where 1=1	 	<if test="id != null and id != ''">	 		and id = #{id}	 	</if>	 	<if test="name != null and name != ''">	 		and name like CONCAT('%',#{name},'%' )	 	</if>	 	<if test="updateTime != null and updateTime != ''">	 		and updateTime = #{updateTime}	 	</if>	 	<if test="updatePerson != null and updatePerson != ''">	 		and updatePerson like CONCAT('%',#{updatePerson},'%' )	 	</if>	 	<if test="status != null and status != ''">	 		and status = #{status}	 	</if>	 	<if test="comment != null and comment != ''">	 		and comment = #{comment}	 	</if>	</select> 	<!-- 保存折扣方案 -->	<insert id="manage.discntSolutn.insert" parameterType="net.jeeshop.services.manage.discntSolutn.bean.DiscntSolutn" 		keyProperty="id" useGeneratedKeys="true">		insert into t_discntsulotn(name,updateTime,updatePerson,status		<if test="comment != null and comment != ''">			,comment		</if>		) values (#{name},now(),#{updatePerson},#{status}		<if test="comment != null and comment != ''">			,#{comment}		</if>		)	</insert>		<!-- 保存方案详情 -->	<insert id="manage.discntSolutn.insertDetail" parameterType="net.jeeshop.services.manage.discntSolutn.bean.DiscntDetail"		keyProperty="id" useGeneratedKeys="true">		insert into t_discntdetail(sid,minVal,maxVal,rate)		values(#{sid},#{minVal},#{maxVal},#{rate})	</insert>		<!-- 根据id查询折扣方案 -->	<select id="manage.discntSolutn.selectOne" parameterType="net.jeeshop.services.manage.discntSolutn.bean.DiscntSolutn"		resultType="net.jeeshop.services.manage.discntSolutn.bean.DiscntSolutn">		select * from t_discntsulotn where 1=1		<if test="id != null and id != ''">			and id = #{id}		</if>	</select>		<!-- 根据折扣方案id查询方案详情 -->	<select id="manage.discntSolutn.selectDiscntDetail" parameterType="net.jeeshop.services.manage.discntSolutn.bean.DiscntDetail"		resultType="net.jeeshop.services.manage.discntSolutn.bean.DiscntDetail">		select * from t_discntdetail where 1=1		<if test="sid != null and sid != ''">			and sid = #{sid}		</if>	</select>		<!-- 更新折扣方案 -->	<update id="manage.discntSolutn.update" parameterType="net.jeeshop.services.manage.discntSolutn.bean.DiscntSolutn">		update t_discntsulotn set name = #{name}, updateTime = now(), 		updatePerson = #{updatePerson}, status = #{status}		<if test="comment != null and comment != ''">			,comment = #{comment}		</if>		where id = #{id}	</update>		<!-- 更新方案详情 -->	<update id="manage.discntSolutn.updateDetail" parameterType="net.jeeshop.services.manage.discntSolutn.bean.DiscntDetail">		update t_discntdetail set minVal = #{minVal}, maxVal = #{maxVal}, rate = #{rate}		where id = #{id}	</update>		<!-- 根据id删除方案详情 -->		<delete id="manage.discntSolutn.delDetailById" parameterType="net.jeeshop.services.manage.discntSolutn.bean.DiscntDetail">		delete from t_discntdetail where id = #{id}	</delete>		<!-- 查询所有折扣方案 -->	<select id="manage.discntSolutn.selectList" parameterType="net.jeeshop.services.manage.discntSolutn.bean.DiscntSolutn"		resultType="net.jeeshop.services.manage.discntSolutn.bean.DiscntSolutn">		select * from t_discntsulotn where status = 'y'	</select>		<!-- 查询区间对应的折扣 -->	<select id="manage.discntSolutn.selectAccountRate" parameterType="net.jeeshop.services.manage.discntSolutn.bean.DiscntDetail"		resultType="net.jeeshop.services.manage.discntSolutn.bean.DiscntDetail">		select t.id ,t.minVal,t.maxVal,t.rate from t_discntdetail t where t.sid=#{sid} and t.minVal &lt;=#{minVal} order by t.minVal desc limit 1	</select>	</mapper>